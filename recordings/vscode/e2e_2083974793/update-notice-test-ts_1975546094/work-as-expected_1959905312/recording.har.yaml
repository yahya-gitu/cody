log:
  _recordingName: e2e/update-notice.test.ts/work as expected
  creator:
    comment: persister:fs
    name: Polly.JS
    version: 6.0.6
  entries:
    - _id: d28b5897886b4e3e674b540a038c3cb4
      _order: 0
      cache: {}
      request:
        bodySize: 0
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 513
        httpVersion: HTTP/1.1
        method: GET
        queryString: []
        url: https://sourcegraph.com/.api/client-config
      response:
        bodySize: 224
        content:
          mimeType: text/plain; charset=utf-8
          size: 224
          text: |
            {
                "codyEnabled": true,
                "chatEnabled": true,
                "autoCompleteEnabled": true,
                "customCommandsEnabled": true,
                "attributionEnabled": false,
                "smartContextWindowEnabled": true,
                "modelsAPIEnabled": false
            }
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:31 GMT
          - name: content-type
            value: text/plain; charset=utf-8
          - name: content-length
            value: "224"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1306
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:31.370Z
      time: 220
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 220
    - _id: a1739cfcd31ea830bd7e21c3f596ae14
      _order: 0
      cache: {}
      request:
        bodySize: 267
        cookies: []
        headers:
          - name: transfer-encoding
            value: chunked
          - name: host
            value: sourcegraph.com
          - name: connection
            value: close
          - name: traceparent
            value: 00-479e76dd4514c5f95000eca58ab1013f-395dbfa25a752da0-01
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: accept-encoding
            value: identity
          - name: content-type
            value: application/json
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 576
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json
          params: []
          textJSON:
            maxTokensToSample: 4000
            messages:
              - speaker: system
                text: You are Cody, an AI coding assistant from Sourcegraph.
              - speaker: human
                text: respond with "hello world"
            model: anthropic/claude-3-5-sonnet-20240620
            temperature: 0.2
            topK: -1
            topP: -1
        queryString:
          - name: api-version
            value: "1"
          - name: client-name
            value: vscode
          - name: client-version
            value: 1.28.0
        url: https://sourcegraph.com/.api/completions/stream?api-version=1&client-name=vscode&client-version=1.28.0
      response:
        bodySize: 234
        content:
          mimeType: text/event-stream
          size: 234
          text: |+
            event: completion
            data: {"completion":"hello world","stopReason":"end_turn"}

            event: done
            data: {}

        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:36 GMT
          - name: content-type
            value: text/event-stream
          - name: transfer-encoding
            value: chunked
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1279
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:34.611Z
      time: 1510
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 1510
    - _id: 97d1abafdf0933c23295cc7d7b7ea7f9
      _order: 0
      cache: {}
      request:
        bodySize: 144
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "144"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 544
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query ContextFilters {
                  site {
                      codyContextFilters(version: V1) {
                          raw
                      }
                  }
              }
            variables: {}
        queryString:
          - name: ContextFilters
            value: null
        url: https://sourcegraph.com/.api/graphql?ContextFilters
      response:
        bodySize: 53
        content:
          mimeType: application/json
          size: 53
          text: "{\"data\":{\"site\":{\"codyContextFilters\":{\"raw\":null}}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:32 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "53"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1296
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:31.851Z
      time: 211
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 211
    - _id: 28c346c4c160958f92e8f989a1737e5e
      _order: 0
      cache: {}
      request:
        bodySize: 318
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "318"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 561
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query CurrentSiteCodyLlmConfiguration {
                  site {
                      codyLLMConfiguration {
                          chatModel
                          chatModelMaxTokens
                          fastChatModel
                          fastChatModelMaxTokens
                          completionModel
                          completionModelMaxTokens
                      }
                  }
              }
            variables: {}
        queryString:
          - name: CurrentSiteCodyLlmConfiguration
            value: null
        url: https://sourcegraph.com/.api/graphql?CurrentSiteCodyLlmConfiguration
      response:
        bodySize: 275
        content:
          mimeType: application/json
          size: 275
          text: "{\"data\":{\"site\":{\"codyLLMConfiguration\":{\"chatModel\":\"anthropic\
            /claude-3-sonnet-20240229\",\"chatModelMaxTokens\":12000,\"fastChat\
            Model\":\"anthropic/claude-3-haiku-20240307\",\"fastChatModelMaxTok\
            ens\":12000,\"completionModel\":\"fireworks/starcoder\",\"completio\
            nModelMaxTokens\":9000}}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:30 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "275"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1297
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.511Z
      time: 211
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 211
    - _id: a4d641ac3093a4efbffe59352b351757
      _order: 0
      cache: {}
      request:
        bodySize: 165
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "165"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 561
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query CurrentSiteCodyLlmConfiguration {
                  site {
                      codyLLMConfiguration {
                          smartContextWindow
                      }
                  }
              }
            variables: {}
        queryString:
          - name: CurrentSiteCodyLlmConfiguration
            value: null
        url: https://sourcegraph.com/.api/graphql?CurrentSiteCodyLlmConfiguration
      response:
        bodySize: 75
        content:
          mimeType: application/json
          size: 75
          text: "{\"data\":{\"site\":{\"codyLLMConfiguration\":{\"smartContextWindow\":\"\
            enabled\"}}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:30 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "75"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1296
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.514Z
      time: 220
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 220
    - _id: 06568f66a76daea32430b82552305046
      _order: 0
      cache: {}
      request:
        bodySize: 150
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "150"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 556
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query CurrentSiteCodyLlmProvider {
                  site {
                      codyLLMConfiguration {
                          provider
                      }
                  }
              }
            variables: {}
        queryString:
          - name: CurrentSiteCodyLlmProvider
            value: null
        url: https://sourcegraph.com/.api/graphql?CurrentSiteCodyLlmProvider
      response:
        bodySize: 65
        content:
          mimeType: application/json
          size: 65
          text: "{\"data\":{\"site\":{\"codyLLMConfiguration\":{\"provider\":\"various\"}\
            }}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:30 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "65"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1296
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.512Z
      time: 218
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 218
    - _id: d1e9e9d8ae116eb7e71823b775d35828
      _order: 0
      cache: {}
      request:
        bodySize: 341
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "341"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 541
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query CurrentUser {
                  currentUser {
                      id
                      hasVerifiedEmail
                      displayName
                      username
                      avatarURL
                      primaryEmail {
                          email
                      }
                      organizations {
                          nodes {
                              id
                              name
                          }
                      }
                  }
              }
            variables: {}
        queryString:
          - name: CurrentUser
            value: null
        url: https://sourcegraph.com/.api/graphql?CurrentUser
      response:
        bodySize: 334
        content:
          mimeType: application/json
          size: 334
          text: "{\"data\":{\"currentUser\":{\"id\":\"VXNlcjozNDQ1Mjc=\",\"hasVerifiedEma\
            il\":true,\"displayName\":\"SourcegraphBot-9000\",\"username\":\"so\
            urcegraphbot9k-fnwmu\",\"avatarURL\":\"https://lh3.googleuserconten\
            t.com/a/ACg8ocKFaqbYeuBkbj5dFEzx8bXV8a7i3sVbKCNPV7G0uyvk=s96-c\",\"\
            primaryEmail\":{\"email\":\"sourcegraphbot9k@gmail.com\"},\"organiz\
            ations\":{\"nodes\":[]}}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:30 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "334"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1297
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.515Z
      time: 235
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 235
    - _id: 9fdf3418a505d251116e020fda591c55
      _order: 0
      cache: {}
      request:
        bodySize: 268
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "268"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 557
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query CurrentUserCodySubscription {
                  currentUser {
                      codySubscription {
                          status
                          plan
                          applyProRateLimits
                          currentPeriodStartAt
                          currentPeriodEndAt
                      }
                  }
              }
            variables: {}
        queryString:
          - name: CurrentUserCodySubscription
            value: null
        url: https://sourcegraph.com/.api/graphql?CurrentUserCodySubscription
      response:
        bodySize: 194
        content:
          mimeType: application/json
          size: 194
          text: "{\"data\":{\"currentUser\":{\"codySubscription\":{\"status\":\"ACTIVE\",\
            \"plan\":\"PRO\",\"applyProRateLimits\":true,\"currentPeriodStartAt\
            \":\"2024-07-14T22:11:32Z\",\"currentPeriodEndAt\":\"2024-08-14T22:\
            11:32Z\"}}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:31 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "194"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1297
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.757Z
      time: 358
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 358
    - _id: a4f06f44ac6627e56ffe62ff40b4aaa9
      _order: 0
      cache: {}
      request:
        bodySize: 101
        cookies: []
        headers:
          - name: connection
            value: close
          - name: host
            value: sourcegraph.com
          - name: accept-encoding
            value: identity
          - name: user-agent
            value: node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
          - name: content-length
            value: "101"
          - name: accept
            value: "*/*"
          - name: content-type
            value: application/json; charset=utf-8
          - name: authorization
            value: token
              REDACTED_5313821e901984ba7bbf1999deafb5f6f722c05ed13b6dfa6cffbd6128089e39
          - name: x-mitm-proxy-name
            value: sourcegraph.dotcom
          - name: x-mitm-auth-token-name
            value: sourcegraph.dotcom
        headersSize: 621
        httpVersion: HTTP/1.1
        method: POST
        postData:
          mimeType: application/json; charset=utf-8
          params: []
          textJSON:
            query: |-
              
              query SiteProductVersion {
                  site {
                      productVersion
                  }
              }
            variables: {}
        queryString:
          - name: SiteProductVersion
            value: null
        url: https://sourcegraph.com/.api/graphql?SiteProductVersion
      response:
        bodySize: 73
        content:
          mimeType: application/json
          size: 73
          text: "{\"data\":{\"site\":{\"productVersion\":\"284362_2024-07-25_5.5-c68e92bc\
            28b3\"}}}"
        cookies: []
        headers:
          - name: date
            value: Fri, 26 Jul 2024 22:31:30 GMT
          - name: content-type
            value: application/json
          - name: content-length
            value: "73"
          - name: connection
            value: close
          - name: access-control-allow-credentials
            value: "true"
          - name: access-control-allow-origin
            value: ""
          - name: cache-control
            value: no-cache, max-age=0
          - name: vary
            value: Cookie,Accept-Encoding,Authorization,Cookie, Authorization,
              X-Requested-With,Cookie
          - name: x-content-type-options
            value: nosniff
          - name: x-frame-options
            value: DENY
          - name: x-xss-protection
            value: 1; mode=block
          - name: strict-transport-security
            value: max-age=31536000; includeSubDomains; preload
        headersSize: 1296
        httpVersion: HTTP/1.1
        redirectURL: ""
        status: 200
        statusText: OK
      startedDateTime: 2024-07-26T22:31:30.505Z
      time: 215
      timings:
        blocked: -1
        connect: -1
        dns: -1
        receive: 0
        send: 0
        ssl: -1
        wait: 215
  pages: []
  version: "1.2"
